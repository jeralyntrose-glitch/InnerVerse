<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lesson - CS Joseph University</title>
    <link rel="stylesheet" href="/static/lesson_page.css">
</head>
<body data-theme="dark">
    <!-- Mobile Hamburger -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
        <span class="hamburger-icon">‚ò∞</span>
    </button>

    <!-- Sidebar Overlay (Mobile) -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Main Container -->
    <div class="lesson-container">
        
        <!-- Mini Sidebar -->
        <aside class="lesson-sidebar" id="lessonSidebar">
            <div class="sidebar-header">
                <a href="javascript:history.back()" class="back-link">
                    <span class="back-icon">‚Üê</span>
                    <span class="back-text">Back to Season</span>
                </a>
                
                <button id="themeToggle" class="theme-toggle-small" aria-label="Toggle theme">
                    <span class="theme-icon">üåô</span>
                </button>
            </div>

            <div class="sidebar-content" id="sidebarContent">
                <!-- Season lessons will be loaded here -->
                <div class="loading-spinner"></div>
            </div>
        </aside>

        <!-- Lesson Content -->
        <main class="lesson-main">
            <!-- Breadcrumb -->
            <nav class="breadcrumb" id="breadcrumb">
                <a href="/" class="breadcrumb-link">Dashboard</a>
                <span class="breadcrumb-separator">‚Ä∫</span>
                <span id="breadcrumbModule">...</span>
                <span class="breadcrumb-separator">‚Ä∫</span>
                <span id="breadcrumbSeason">...</span>
            </nav>

            <!-- Lesson Header -->
            <header class="lesson-header" id="lessonHeader">
                <div class="lesson-meta-small" id="lessonMetaSmall">Loading...</div>
                <h1 class="lesson-title" id="lessonTitle">Loading lesson...</h1>
            </header>

            <!-- Video Section -->
            <section class="video-section" id="videoSection">
                <!-- Video or Skool message will be inserted here -->
            </section>

            <!-- AI-Generated Lesson Content -->
            <section class="lesson-content-section">
                <h2 class="section-title">üìù Lesson Summary</h2>
                <div class="lesson-content" id="lessonContent">
                    <div class="loading-state">
                        <div class="spinner"></div>
                        <p>Generating lesson content...</p>
                    </div>
                </div>
                
                <button class="mark-complete-btn" id="markCompleteBtn" style="display: none;">
                    <span class="btn-icon">‚úì</span>
                    <span class="btn-text">Mark as Complete</span>
                </button>
            </section>

            <!-- Transcript Section -->
            <section class="transcript-section">
                <button class="transcript-toggle" id="transcriptToggle" disabled>
                    <span class="toggle-icon">üìÑ</span>
                    <span class="toggle-text">Show Transcript</span>
                    <span class="toggle-arrow">‚ñº</span>
                </button>
                
                <div class="transcript-content" id="transcriptContent" style="display: none;">
                    <div class="transcript-text" id="transcriptText">
                        <!-- Transcript will be loaded here -->
                    </div>
                </div>
            </section>

            <!-- Navigation -->
            <nav class="lesson-navigation">
                <button class="nav-btn prev-btn" id="prevBtn" disabled>
                    <span class="nav-icon">‚óÄ</span>
                    <span class="nav-text">Previous Lesson</span>
                </button>
                
                <button class="nav-btn next-btn" id="nextBtn" disabled>
                    <span class="nav-text">Next Lesson</span>
                    <span class="nav-icon">‚ñ∂</span>
                </button>
            </nav>
        </main>

        <!-- AI Tutor Chat -->
        <aside class="chat-panel">
            <div class="chat-header">
                <h2 class="chat-title">üí¨ AI Tutor</h2>
                <p class="chat-subtitle">Ask anything about this lesson</p>
            </div>

            <div class="chat-messages" id="chatMessages">
                <!-- Chat messages will be loaded here -->
            </div>

            <div class="chat-input-container">
                <textarea 
                    id="chatInput"
                    class="chat-input"
                    placeholder="Ask a question about this lesson..."
                    rows="2"
                ></textarea>
                <button id="sendBtn" class="send-btn">
                    <span class="send-icon">‚ñ∂</span>
                </button>
            </div>
        </aside>

    </div>

    <script src="/static/lesson_page.js"></script>
</body>
</html>
