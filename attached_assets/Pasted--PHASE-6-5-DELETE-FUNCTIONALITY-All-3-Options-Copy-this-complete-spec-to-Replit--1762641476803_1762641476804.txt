ğŸ¯ PHASE 6.5: DELETE FUNCTIONALITY (All 3 Options)
Copy this complete spec to Replit:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
PHASE 6.5: ADD DELETE FUNCTIONALITY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Add 3 types of delete functionality with safety confirmations:
1. Delete individual lesson
2. Delete entire course (+ all its lessons)
3. Delete ALL content (nuclear reset)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
BACKEND - Add to app.py (or main.py)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# 1. DELETE INDIVIDUAL LESSON
@app.delete('/api/lessons/<int:lesson_id>')
def delete_lesson(lesson_id):
    """Delete a single lesson and its concept assignments"""
    try:
        conn = get_db_connection()
        cursor = conn.cursor()
        
        # Check if lesson exists
        cursor.execute("SELECT id, title FROM lessons WHERE id = ?", (lesson_id,))
        lesson = cursor.fetchone()
        if not lesson:
            conn.close()
            return jsonify({'success': False, 'error': 'Lesson not found'}), 404
        
        lesson_title = lesson['title']
        
        # Delete lesson (CASCADE handles lesson_concepts automatically)
        cursor.execute("DELETE FROM lessons WHERE id = ?", (lesson_id,))
        conn.commit()
        conn.close()
        
        print(f"âœ… Deleted lesson: {lesson_title}")
        return jsonify({
            'success': True, 
            'message': f'Deleted lesson: {lesson_title}'
        })
        
    except Exception as e:
        print(f"âŒ Error deleting lesson {lesson_id}: {e}")
        return jsonify({'success': False, 'error': str(e)}), 500


# 2. DELETE ENTIRE COURSE
@app.delete('/api/courses/<int:course_id>')
def delete_course(course_id):
    """Delete a course and all its lessons"""
    try:
        conn = get_db_connection()
        cursor = conn.cursor()
        
        # Check if course exists
        cursor.execute("SELECT id, title FROM courses WHERE id = ?", (course_id,))
        course = cursor.fetchone()
        if not course:
            conn.close()
            return jsonify({'success': False, 'error': 'Course not found'}), 404
        
        course_title = course['title']
        
        # Count lessons to be deleted
        cursor.execute("SELECT COUNT(*) as count FROM lessons WHERE course_id = ?", (course_id,))
        lesson_count = cursor.fetchone()['count']
        
        # Delete course (CASCADE handles lessons and lesson_concepts)
        cursor.execute("DELETE FROM courses WHERE id = ?", (course_id,))
        conn.commit()
        conn.close()
        
        print(f"âœ… Deleted course '{course_title}' with {lesson_count} lessons")
        return jsonify({
            'success': True,
            'message': f'Deleted course "{course_title}" and {lesson_count} lessons'
        })
        
    except Exception as e:
        print(f"âŒ Error deleting course {course_id}: {e}")
        return jsonify({'success': False, 'error': str(e)}), 500


# 3. DELETE ALL CONTENT (NUCLEAR OPTION)
@app.delete('/api/admin/reset-all')
def reset_all_content():
    """Delete ALL courses, lessons, and assignments (admin only)"""
    try:
        conn = get_db_connection()
        cursor = conn.cursor()
        
        # Count everything first
        cursor.execute("SELECT COUNT(*) as count FROM courses")
        course_count = cursor.fetchone()['count']
        
        cursor.execute("SELECT COUNT(*) as count FROM lessons")
        lesson_count = cursor.fetchone()['count']
        
        cursor.execute("SELECT COUNT(*) as count FROM lesson_concepts")
        assignment_count = cursor.fetchone()['count']
        
        # Delete everything (in order due to foreign keys)
        cursor.execute("DELETE FROM lesson_concepts")
        cursor.execute("DELETE FROM lessons")
        cursor.execute("DELETE FROM courses")
        
        conn.commit()
        conn.close()
        
        print(f"ğŸ—‘ï¸ NUCLEAR RESET: Deleted {course_count} courses, {lesson_count} lessons, {assignment_count} assignments")
        return jsonify({
            'success': True,
            'message': f'Deleted {course_count} courses, {lesson_count} lessons, {assignment_count} assignments'
        })
        
    except Exception as e:
        print(f"âŒ Error in nuclear reset: {e}")
        return jsonify({'success': False, 'error': str(e)}), 500

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
FRONTEND - Option 1: Delete Lesson Button
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Add to lesson page (src/pages/LessonPage.jsx or similar):

Location: Add near the lesson title or in a settings menu

const handleDeleteLesson = async () => {
  // Two-step confirmation
  const firstConfirm = window.confirm(
    `âš ï¸ Delete this lesson?\n\n"${lessonTitle}"\n\nThis will also remove all concept assignments.`
  );
  
  if (!firstConfirm) return;
  
  const secondConfirm = window.confirm(
    'ğŸš¨ Are you SURE? This cannot be undone!'
  );
  
  if (!secondConfirm) return;
  
  try {
    const response = await fetch(`/api/lessons/${lessonId}`, {
      method: 'DELETE'
    });
    
    const data = await response.json();
    
    if (data.success) {
      alert('âœ… ' + data.message);
      // Redirect back to course or home
      window.location.href = '/';
    } else {
      alert('âŒ Error: ' + data.error);
    }
  } catch (error) {
    alert('âŒ Failed to delete: ' + error.message);
  }
};

// Button component
<button
  onClick={handleDeleteLesson}
  className="px-3 py-1 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded border border-red-300"
  title="Delete this lesson"
>
  ğŸ—‘ï¸ Delete Lesson
</button>

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
FRONTEND - Option 2: Delete Course Button
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Add to course view/card (wherever courses are displayed):

const handleDeleteCourse = async (courseId, courseTitle) => {
  // Two-step confirmation
  const firstConfirm = window.confirm(
    `âš ï¸ Delete entire course?\n\n"${courseTitle}"\n\nThis will delete ALL lessons in this course!`
  );
  
  if (!firstConfirm) return;
  
  const secondConfirm = window.confirm(
    'ğŸš¨ Are you ABSOLUTELY SURE?\n\nAll lessons and progress will be PERMANENTLY deleted!'
  );
  
  if (!secondConfirm) return;
  
  try {
    const response = await fetch(`/api/courses/${courseId}`, {
      method: 'DELETE'
    });
    
    const data = await response.json();
    
    if (data.success) {
      alert('âœ… ' + data.message);
      // Refresh the page or remove from list
      window.location.reload();
    } else {
      alert('âŒ Error: ' + data.error);
    }
  } catch (error) {
    alert('âŒ Failed to delete: ' + error.message);
  }
};

// Button component (add to course card/list)
<button
  onClick={() => handleDeleteCourse(course.id, course.title)}
  className="px-3 py-1 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded border border-red-300"
  title="Delete entire course"
>
  ğŸ—‘ï¸ Delete Course
</button>

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
FRONTEND - Option 3: Nuclear Reset Button
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Add to settings page or admin area:

const handleNuclearReset = async () => {
  // THREE-step confirmation (it's that serious!)
  const firstConfirm = window.confirm(
    'ğŸš¨ NUCLEAR RESET ğŸš¨\n\nThis will delete:\n- ALL courses\n- ALL lessons\n- ALL concept assignments\n\nAre you sure?'
  );
  
  if (!firstConfirm) return;
  
  const secondConfirm = window.confirm(
    'âš ï¸ FINAL WARNING âš ï¸\n\nEverything will be PERMANENTLY deleted.\n\nYou will have to regenerate all content.\n\nContinue?'
  );
  
  if (!secondConfirm) return;
  
  // Type confirmation
  const typeConfirm = window.prompt(
    'Type "DELETE EVERYTHING" to confirm (case-sensitive):'
  );
  
  if (typeConfirm !== 'DELETE EVERYTHING') {
    alert('Confirmation text did not match. Reset cancelled.');
    return;
  }
  
  try {
    const response = await fetch('/api/admin/reset-all', {
      method: 'DELETE'
    });
    
    const data = await response.json();
    
    if (data.success) {
      alert('ğŸ—‘ï¸ ' + data.message + '\n\nRedirecting to home...');
      window.location.href = '/';
    } else {
      alert('âŒ Error: ' + data.error);
    }
  } catch (error) {
    alert('âŒ Failed to reset: ' + error.message);
  }
};

// Button component (in settings/admin area)
<div className="border-2 border-red-600 rounded-lg p-4 bg-red-50">
  <h3 className="text-lg font-bold text-red-900 mb-2">
    âš ï¸ Danger Zone
  </h3>
  <p className="text-sm text-red-700 mb-3">
    Delete all courses, lessons, and assignments. This cannot be undone.
  </p>
  <button
    onClick={handleNuclearReset}
    className="px-4 py-2 bg-red-600 text-white font-bold rounded hover:bg-red-700"
  >
    ğŸ—‘ï¸ Reset All Content
  </button>
</div>

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
UI PLACEMENT RECOMMENDATIONS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. DELETE LESSON:
   Location: Top-right of lesson page, maybe in a "..." menu
   Style: Small, subtle, red text/icon
   
2. DELETE COURSE:
   Location: On course cards in tree view or course list
   Style: Small button/icon on hover
   
3. NUCLEAR RESET:
   Location: Settings page or admin panel
   Style: Big warning box in "Danger Zone" section

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
TESTING CHECKLIST
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

After implementation:

DELETE LESSON:
â–¡ Button appears on lesson page
â–¡ Shows 2 confirmation dialogs
â–¡ Successfully deletes lesson
â–¡ Removes concept assignments
â–¡ Redirects after deletion
â–¡ Shows success message

DELETE COURSE:
â–¡ Button appears on course view
â–¡ Shows 2 confirmation dialogs
â–¡ Successfully deletes course
â–¡ Deletes all lessons in course
â–¡ Updates UI after deletion
â–¡ Shows success message with count

NUCLEAR RESET:
â–¡ Button appears in admin/settings
â–¡ Shows 3 confirmations (2 dialogs + typed text)
â–¡ Only proceeds if "DELETE EVERYTHING" typed exactly
â–¡ Successfully deletes all content
â–¡ Shows summary message
â–¡ Redirects to home

SAFETY:
â–¡ All delete operations have multiple confirmations
â–¡ Cancel works at any step
â–¡ Error messages display properly
â–¡ Database constraints handle cascading deletes
â–¡ No orphaned records left behind

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
SUCCESS CRITERIA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… All 3 delete endpoints working
âœ… Frontend buttons in appropriate locations
âœ… Multiple confirmation steps prevent accidents
âœ… Clear success/error messages
âœ… Proper cleanup (no orphaned data)
âœ… Smooth UX (redirects, updates, etc)

ESTIMATED TIME: 1 hour

This gives you full content management! ğŸ—‘ï¸âœ¨

ğŸŠ AFTER PHASE 6.5
You'll have:

âœ… Complete content management
âœ… Ability to delete individual lessons
âœ… Ability to delete entire courses
âœ… Nuclear reset option for fresh starts
âœ… Safe with multiple confirmations