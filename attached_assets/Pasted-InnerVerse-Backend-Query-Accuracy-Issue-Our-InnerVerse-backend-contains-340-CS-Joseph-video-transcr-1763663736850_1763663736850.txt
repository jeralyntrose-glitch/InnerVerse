InnerVerse Backend Query Accuracy Issue
Our InnerVerse backend contains 340+ CS Joseph video transcripts stored in Pinecone with structured metadata tags (types discussed, seasons, episodes, frameworks, etc.). However, when users query the system through the /query endpoint, they’re not consistently receiving the correct, specific content even though that content exists in the database.
Specific Example: When a user asks “What is ENFP’s pedagogue pair?”, the system should return the specific Season 14 episode titled “Pedagogue Pairs: ENFP & INTJ” as the top result. However, the current system either: (1) misses this episode entirely, (2) returns it buried among less relevant results, or (3) returns generic content about pedagogue relationships without the specific ENFP-INTJ pairing information.
Root Cause Hypothesis: The /query endpoint appears to be using basic semantic vector search with a low top_k value (likely 10-15 results) and is NOT leveraging the structured metadata tags we’ve added to documents. This means queries rely purely on text similarity rather than using metadata filters (like season="14", types_featured=["ENFP"], relationship_type="pedagogue") to narrow results intelligently before ranking. Additionally, there’s likely no re-ranking step that boosts results with exact metadata matches (like episode titles or type tags) over general content mentions.
Impact Scope: This affects ALL query types across the entire knowledge base - not just compatibility queries. Users asking about specific types, cognitive functions, frameworks, or episodes are getting incomplete or inaccurate results despite the correct content being present in Pinecone. This breaks the core learning experience since users cannot reliably access the specific CS Joseph teachings they need.
Verification Test: To confirm this is the issue, check if the /query endpoint code currently uses Pinecone’s filter parameter or if it only passes vector and top_k to the query. If filters aren’t being applied and top_k is 10-15 or lower, this explains the accuracy problems.